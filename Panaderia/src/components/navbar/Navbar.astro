---


import { collection, doc, DocumentReference, getDoc, getDocs, getFirestore, type DocumentData } from 'firebase/firestore'
import logo from '../../assets/BakeryLogo.svg'
import Button from '../elements/Button.astro'
import { app, db } from '../../layouts/Layout.astro'
import {Counter} from '../elements/Counter.tsx'




let dayData, ingredientes;

const fetchData = async () => {
  try {
    const docRef = doc(db, 'panaderia', 'dia'); 
    const docSnap = await getDoc(docRef);

    if (docSnap.exists()) {
      return  docSnap.data();
    } 
  } catch (error) {
    console.error('Error fetching document from Firestore:', error);
  }
};

dayData = await fetchData();


const fetchDataIn = async () => {
  try {
    const docRef = doc(db, 'panaderia', 'existenciaIngredientes'); 
    const docSnap = await getDoc(docRef);
    if (docSnap.exists()) {
      return  docSnap.data();
    } 
  } catch (error) {
    console.error('Error fetching document from Firestore:', error);
  }
};
ingredientes = await fetchDataIn();

---

<nav class="h-full flex flex-col items-center p-10 w-1/4" >
  <a href="/" class="flex justify-center">
    <img src={logo.src} alt="Logo" class="mb-4" style={{ height: '200px' }} />
  </a>


  <div class="flex flex-col gap-4 w-full items-center h-full">
    <Button
    text='Inicio'
    path='/'
  />
  <Button
    text='ProducciÃ³n'
    path=`/productos/${dayData.dia}`
  />
  <Button
    text='Ventas'
    path=`/ventas/${dayData.dia}`
  />
  <Button
    text='Existencia'
    path=`/recursos/${dayData.dia}`
  />
  </div>
  
  <div class="flex flex-col gap-4 w-full items-center">
    <p class="text-tertiary font-medium">Dia: <span class="font-bold">{dayData.numero}</span></p>
    <Counter diaS={dayData['semana'][6]} semanaData={dayData['semana']} dayName={dayData.dia} currentDay={dayData.numero} ingredientes={ingredientes['current']}  client:load/>
  </div>

</nav>