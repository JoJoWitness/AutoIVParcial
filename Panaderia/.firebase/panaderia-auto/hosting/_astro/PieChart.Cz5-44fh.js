import{p as ce,c as O,s as F,a as U,h as he,e as H,t as Ce,b as X,m as ae,d as ge,f as w,g as pe,i as Ie,j as ke,k as me,l as Ae,n as ye,_ as B,u as Te,o as T,q as Q,r as $e,v as be,w as Pe,x as _e,y as fe,z as je,D as we,A as He,B as Fe,C as Ee,R as Ne,E as Se,F as De,G as Ue,H as Oe,I as We,J as qe}from"./ChartsOverlay.DgVG2tJd.js";import{r as le}from"./index.DqsuSE5L.js";import{j}from"./jsx-runtime.CLpGMVip.js";const re=Math.PI,oe=2*re,W=1e-6,ze=oe-W;function Le(e){this._+=e[0];for(let i=1,t=e.length;i<t;++i)this._+=arguments[i]+e[i]}function Xe(e){let i=Math.floor(e);if(!(i>=0))throw new Error(`invalid digits: ${e}`);if(i>15)return Le;const t=10**i;return function(n){this._+=n[0];for(let a=1,r=n.length;a<r;++a)this._+=Math.round(arguments[a]*t)/t+n[a]}}class Be{constructor(i){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=i==null?Le:Xe(i)}moveTo(i,t){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(i,t){this._append`L${this._x1=+i},${this._y1=+t}`}quadraticCurveTo(i,t,n,a){this._append`Q${+i},${+t},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(i,t,n,a,r,c){this._append`C${+i},${+t},${+n},${+a},${this._x1=+r},${this._y1=+c}`}arcTo(i,t,n,a,r){if(i=+i,t=+t,n=+n,a=+a,r=+r,r<0)throw new Error(`negative radius: ${r}`);let c=this._x1,o=this._y1,f=n-i,d=a-t,s=c-i,g=o-t,l=s*s+g*g;if(this._x1===null)this._append`M${this._x1=i},${this._y1=t}`;else if(l>W)if(!(Math.abs(g*f-d*s)>W)||!r)this._append`L${this._x1=i},${this._y1=t}`;else{let u=n-c,m=a-o,x=f*f+d*d,_=u*u+m*m,p=Math.sqrt(x),R=Math.sqrt(l),A=r*Math.tan((re-Math.acos((x+l-_)/(2*p*R)))/2),y=A/R,$=A/p;Math.abs(y-1)>W&&this._append`L${i+y*s},${t+y*g}`,this._append`A${r},${r},0,0,${+(g*u>s*m)},${this._x1=i+$*f},${this._y1=t+$*d}`}}arc(i,t,n,a,r,c){if(i=+i,t=+t,n=+n,c=!!c,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),f=n*Math.sin(a),d=i+o,s=t+f,g=1^c,l=c?a-r:r-a;this._x1===null?this._append`M${d},${s}`:(Math.abs(this._x1-d)>W||Math.abs(this._y1-s)>W)&&this._append`L${d},${s}`,n&&(l<0&&(l=l%oe+oe),l>ze?this._append`A${n},${n},0,1,${g},${i-o},${t-f}A${n},${n},0,1,${g},${this._x1=d},${this._y1=s}`:l>W&&this._append`A${n},${n},0,${+(l>=re)},${g},${this._x1=i+n*Math.cos(r)},${this._y1=t+n*Math.sin(r)}`)}rect(i,t,n,a){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+t}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Ve(e){let i=3;return e.digits=function(t){if(!arguments.length)return i;if(t==null)i=null;else{const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);i=n}return e},()=>new Be(i)}function Ze(e){return e.innerRadius}function Ge(e){return e.outerRadius}function Je(e){return e.startAngle}function Ke(e){return e.endAngle}function Qe(e){return e&&e.padAngle}function Ye(e,i,t,n,a,r,c,o){var f=t-e,d=n-i,s=c-a,g=o-r,l=g*f-s*d;if(!(l*l<H))return l=(s*(i-r)-g*(e-a))/l,[e+l*f,i+l*d]}function K(e,i,t,n,a,r,c){var o=e-t,f=i-n,d=(c?r:-r)/X(o*o+f*f),s=d*f,g=-d*o,l=e+s,u=i+g,m=t+s,x=n+g,_=(l+m)/2,p=(u+x)/2,R=m-l,A=x-u,y=R*R+A*A,$=a-r,P=l*x-m*u,v=(A<0?-1:1)*X(ke(0,$*$*y-P*P)),C=(P*A-R*v)/y,I=(-P*R-A*v)/y,L=(P*A+R*v)/y,M=(-P*R+A*v)/y,k=C-_,h=I-p,b=L-_,E=M-p;return k*k+h*h>b*b+E*E&&(C=L,I=M),{cx:C,cy:I,x01:-s,y01:-g,x11:C*(a/$-1),y11:I*(a/$-1)}}function Me(){var e=Ze,i=Ge,t=U(0),n=null,a=Je,r=Ke,c=Qe,o=null,f=Ve(d);function d(){var s,g,l=+e.apply(this,arguments),u=+i.apply(this,arguments),m=a.apply(this,arguments)-he,x=r.apply(this,arguments)-he,_=ge(x-m),p=x>m;if(o||(o=s=f()),u<l&&(g=u,u=l,l=g),!(u>H))o.moveTo(0,0);else if(_>Ce-H)o.moveTo(u*O(m),u*F(m)),o.arc(0,0,u,m,x,!p),l>H&&(o.moveTo(l*O(x),l*F(x)),o.arc(0,0,l,x,m,p));else{var R=m,A=x,y=m,$=x,P=_,v=_,C=c.apply(this,arguments)/2,I=C>H&&(n?+n.apply(this,arguments):X(l*l+u*u)),L=ae(ge(u-l)/2,+t.apply(this,arguments)),M=L,k=L,h,b;if(I>H){var E=pe(I/l*F(C)),N=pe(I/u*F(C));(P-=E*2)>H?(E*=p?1:-1,y+=E,$-=E):(P=0,y=$=(m+x)/2),(v-=N*2)>H?(N*=p?1:-1,R+=N,A-=N):(v=0,R=A=(m+x)/2)}var D=u*O(R),z=u*F(R),V=l*O($),Z=l*F($);if(L>H){var G=u*O(A),J=u*F(A),Y=l*O(y),ee=l*F(y),S;if(_<ce)if(S=Ye(D,z,Y,ee,G,J,V,Z)){var ie=D-S[0],te=z-S[1],ne=G-S[0],se=J-S[1],de=1/F(Ie((ie*ne+te*se)/(X(ie*ie+te*te)*X(ne*ne+se*se)))/2),ue=X(S[0]*S[0]+S[1]*S[1]);M=ae(L,(l-ue)/(de-1)),k=ae(L,(u-ue)/(de+1))}else M=k=0}v>H?k>H?(h=K(Y,ee,D,z,u,k,p),b=K(G,J,V,Z,u,k,p),o.moveTo(h.cx+h.x01,h.cy+h.y01),k<L?o.arc(h.cx,h.cy,k,w(h.y01,h.x01),w(b.y01,b.x01),!p):(o.arc(h.cx,h.cy,k,w(h.y01,h.x01),w(h.y11,h.x11),!p),o.arc(0,0,u,w(h.cy+h.y11,h.cx+h.x11),w(b.cy+b.y11,b.cx+b.x11),!p),o.arc(b.cx,b.cy,k,w(b.y11,b.x11),w(b.y01,b.x01),!p))):(o.moveTo(D,z),o.arc(0,0,u,R,A,!p)):o.moveTo(D,z),!(l>H)||!(P>H)?o.lineTo(V,Z):M>H?(h=K(V,Z,G,J,l,-M,p),b=K(D,z,Y,ee,l,-M,p),o.lineTo(h.cx+h.x01,h.cy+h.y01),M<L?o.arc(h.cx,h.cy,M,w(h.y01,h.x01),w(b.y01,b.x01),!p):(o.arc(h.cx,h.cy,M,w(h.y01,h.x01),w(h.y11,h.x11),!p),o.arc(0,0,l,w(h.cy+h.y11,h.cx+h.x11),w(b.cy+b.y11,b.cx+b.x11),p),o.arc(b.cx,b.cy,M,w(b.y11,b.x11),w(b.y01,b.x01),!p))):o.arc(0,0,l,$,y,p)}if(o.closePath(),s)return o=null,s+""||null}return d.centroid=function(){var s=(+e.apply(this,arguments)+ +i.apply(this,arguments))/2,g=(+a.apply(this,arguments)+ +r.apply(this,arguments))/2-ce/2;return[O(g)*s,F(g)*s]},d.innerRadius=function(s){return arguments.length?(e=typeof s=="function"?s:U(+s),d):e},d.outerRadius=function(s){return arguments.length?(i=typeof s=="function"?s:U(+s),d):i},d.cornerRadius=function(s){return arguments.length?(t=typeof s=="function"?s:U(+s),d):t},d.padRadius=function(s){return arguments.length?(n=s==null?null:typeof s=="function"?s:U(+s),d):n},d.startAngle=function(s){return arguments.length?(a=typeof s=="function"?s:U(+s),d):a},d.endAngle=function(s){return arguments.length?(r=typeof s=="function"?s:U(+s),d):r},d.padAngle=function(s){return arguments.length?(c=typeof s=="function"?s:U(+s),d):c},d.context=function(s){return arguments.length?(o=s??null,d):o},d}function q(e,i){if(typeof e=="number")return e;if(e==="100%")return i;if(e.endsWith("%")){const t=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(t))return t*i/100}if(e.endsWith("px")){const t=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(t))return t}throw new Error(`MUI X: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}const ei=["classes","color","cornerRadius","dataIndex","endAngle","id","innerRadius","isFaded","isHighlighted","onClick","outerRadius","paddingAngle","startAngle","highlightScope"];function ii(e){return be("MuiPieArc",e)}me("MuiPieArc",["root","highlighted","faded"]);const ti=e=>{const{classes:i,id:t,isFaded:n,isHighlighted:a,dataIndex:r}=e,c={root:["root",`series-${t}`,`data-index-${r}`,a&&"highlighted",n&&"faded"]};return $e(c,ii,i)},ni=Ae(ye.path,{name:"MuiPieArc",slot:"Root",overridesResolver:(e,i)=>i.arc})(({theme:e})=>({stroke:(e.vars||e).palette.background.paper,transition:"opacity 0.2s ease-in, fill 0.2s ease-in, filter 0.2s ease-in"}));function si(e){const{classes:i,color:t,cornerRadius:n,dataIndex:a,endAngle:r,id:c,innerRadius:o,isFaded:f,isHighlighted:d,onClick:s,outerRadius:g,paddingAngle:l,startAngle:u}=e,m=B(e,ei),x={id:c,dataIndex:a,classes:i,color:t,isFaded:f,isHighlighted:d},_=ti(x),p=Te();return j.jsx(ni,T({d:Q([u,r,l,o,g,n],(R,A,y,$,P,v)=>Me().cornerRadius(v)({padAngle:y,startAngle:R,endAngle:A,innerRadius:$,outerRadius:P})),visibility:Q([u,r],(R,A)=>R===A?"hidden":"visible"),onClick:s,cursor:s?"pointer":"unset",ownerState:x,className:_.root,fill:x.color,opacity:x.isFaded?.3:1,filter:x.isHighlighted?"brightness(120%)":"none",strokeWidth:1,strokeLinejoin:"round"},m,p({type:"pie",seriesId:c,dataIndex:a})))}const ai={keys:e=>e.id,from:({innerRadius:e,outerRadius:i,cornerRadius:t,startAngle:n,endAngle:a,paddingAngle:r,color:c,isFaded:o})=>({innerRadius:e,outerRadius:(e+i)/2,cornerRadius:t,startAngle:(n+a)/2,endAngle:(n+a)/2,paddingAngle:r,fill:c,opacity:o?.3:1}),leave:({innerRadius:e,startAngle:i,endAngle:t})=>({innerRadius:e,outerRadius:e,startAngle:(i+t)/2,endAngle:(i+t)/2}),enter:({innerRadius:e,outerRadius:i,startAngle:t,endAngle:n})=>({innerRadius:e,outerRadius:i,startAngle:t,endAngle:n}),update:({innerRadius:e,outerRadius:i,cornerRadius:t,startAngle:n,endAngle:a,paddingAngle:r,color:c,isFaded:o})=>({innerRadius:e,outerRadius:i,cornerRadius:t,startAngle:n,endAngle:a,paddingAngle:r,fill:c,opacity:o?.3:1}),config:{tension:120,friction:14,clamp:!0}},ri={keys:e=>e.id,from:({innerRadius:e,outerRadius:i,arcLabelRadius:t,cornerRadius:n,startAngle:a,endAngle:r,paddingAngle:c})=>({innerRadius:e,outerRadius:(e+i)/2,cornerRadius:n,arcLabelRadius:t,startAngle:(a+r)/2,endAngle:(a+r)/2,paddingAngle:c,opacity:0}),leave:({innerRadius:e,startAngle:i,endAngle:t})=>({innerRadius:e,outerRadius:e,arcLabelRadius:e,startAngle:(i+t)/2,endAngle:(i+t)/2,opacity:0}),enter:({innerRadius:e,outerRadius:i,startAngle:t,endAngle:n,arcLabelRadius:a})=>({innerRadius:e,outerRadius:i,startAngle:t,endAngle:n,arcLabelRadius:a,opacity:1}),update:({innerRadius:e,outerRadius:i,cornerRadius:t,startAngle:n,endAngle:a,paddingAngle:r,arcLabelRadius:c})=>({innerRadius:e,outerRadius:i,cornerRadius:t,startAngle:n,endAngle:a,paddingAngle:r,arcLabelRadius:c,opacity:1}),config:{tension:120,friction:14,clamp:!0}};function ve(e){const{id:i,data:t,faded:n,highlighted:a,paddingAngle:r=0,innerRadius:c=0,arcLabelRadius:o,outerRadius:f,cornerRadius:d=0}=e,{isFaded:s,isHighlighted:g}=Pe();return le.useMemo(()=>t.map((u,m)=>{const x={seriesId:i,dataIndex:m},_=g(x),p=!_&&s(x),R=T({additionalRadius:0},p&&n||_&&a||{}),A=Math.max(0,Math.PI*(R.paddingAngle??r)/180),y=Math.max(0,R.innerRadius??c),$=Math.max(0,R.outerRadius??f+R.additionalRadius),P=R.cornerRadius??d,v=R.arcLabelRadius??o??(y+$)/2;return T({},u,R,{isFaded:p,isHighlighted:_,paddingAngle:A,innerRadius:y,outerRadius:$,cornerRadius:P,arcLabelRadius:v})}),[d,c,f,r,o,t,n,a,s,g,i])}const oi=["slots","slotProps","innerRadius","outerRadius","cornerRadius","paddingAngle","id","highlighted","faded","data","onItemClick","skipAnimation"];function li(e){const{slots:i,slotProps:t,innerRadius:n=0,outerRadius:a,cornerRadius:r=0,paddingAngle:c=0,id:o,highlighted:f,faded:d={additionalRadius:-5},data:s,onItemClick:g,skipAnimation:l}=e,u=B(e,oi),m=ve({innerRadius:n,outerRadius:a,cornerRadius:r,paddingAngle:c,id:o,highlighted:f,faded:d,data:s}),x=_e(m,T({},ai,{immediate:l})),{highlightScope:_}=Pe();if(s.length===0)return null;const p=i?.pieArc??si;return j.jsx("g",T({},u,{children:x(({startAngle:R,endAngle:A,paddingAngle:y,innerRadius:$,outerRadius:P,cornerRadius:v},C,I,L)=>j.jsx(p,T({startAngle:R,endAngle:A,paddingAngle:y,innerRadius:$,outerRadius:P,cornerRadius:v,id:o,color:C.color,dataIndex:L,highlightScope:_,isFaded:C.isFaded,isHighlighted:C.isHighlighted,onClick:g&&(M=>{g(M,{type:"pie",seriesId:o,dataIndex:L},C)})},t?.pieArc)))}))}const di=["id","classes","color","startAngle","endAngle","paddingAngle","arcLabelRadius","innerRadius","outerRadius","cornerRadius","formattedArcLabel","isHighlighted","isFaded","style"];function ui(e){return be("MuiPieArcLabel",e)}me("MuiPieArcLabel",["root","highlighted","faded"]);const ci=e=>{const{classes:i,id:t,isFaded:n,isHighlighted:a}=e,r={root:["root",`series-${t}`,a&&"highlighted",n&&"faded"]};return $e(r,ui,i)},hi=Ae(ye.text,{name:"MuiPieArcLabel",slot:"Root",overridesResolver:(e,i)=>i.root})(({theme:e})=>({fill:(e.vars||e).palette.text.primary,textAnchor:"middle",dominantBaseline:"middle",pointerEvents:"none"})),xe=(e,i)=>(t,n,a,r,c)=>{if(!e)return 0;const[o,f]=Me().cornerRadius(c).centroid({padAngle:a,startAngle:t,endAngle:n,innerRadius:r,outerRadius:r});return i==="x"?o:f};function gi(e){const{id:i,classes:t,color:n,startAngle:a,endAngle:r,paddingAngle:c,arcLabelRadius:o,cornerRadius:f,formattedArcLabel:d,isHighlighted:s,isFaded:g,style:l}=e,u=B(e,di),x=ci({id:i,classes:t,color:n,isFaded:g,isHighlighted:s});return j.jsx(hi,T({className:x.root},u,{style:T({x:Q([a,r,c,o,f],xe(d,"x")),y:Q([a,r,c,o,f],xe(d,"y"))},l),children:d}))}const pi=["arcLabel","arcLabelMinAngle","arcLabelRadius","cornerRadius","data","faded","highlighted","id","innerRadius","outerRadius","paddingAngle","skipAnimation","slotProps","slots"],fi=["startAngle","endAngle","paddingAngle","innerRadius","outerRadius","arcLabelRadius","cornerRadius"],xi=180/Math.PI;function Ri(e,i,t){if(!e||(t.endAngle-t.startAngle)*xi<i)return null;switch(e){case"label":return fe(t.label,"arc");case"value":return t.value?.toString();case"formattedValue":return t.formattedValue;default:return e(T({},t,{label:fe(t.label,"arc")}))}}function mi(e){const{arcLabel:i,arcLabelMinAngle:t=0,arcLabelRadius:n,cornerRadius:a=0,data:r,faded:c={additionalRadius:-5},highlighted:o,id:f,innerRadius:d,outerRadius:s,paddingAngle:g=0,skipAnimation:l,slotProps:u,slots:m}=e,x=B(e,pi),_=ve({innerRadius:d,outerRadius:s,arcLabelRadius:n,cornerRadius:a,paddingAngle:g,id:f,highlighted:o,faded:c,data:r}),p=_e(_,T({},ri,{immediate:l}));if(r.length===0)return null;const R=m?.pieArcLabel??gi;return j.jsx("g",T({},x,{children:p((A,y)=>{let{startAngle:$,endAngle:P,paddingAngle:v,innerRadius:C,outerRadius:I,arcLabelRadius:L,cornerRadius:M}=A,k=B(A,fi);return j.jsx(R,T({startAngle:$,endAngle:P,paddingAngle:v,innerRadius:C,outerRadius:I,arcLabelRadius:L,cornerRadius:M,style:k,id:f,color:y.color,isFaded:y.isFaded,isHighlighted:y.isHighlighted,formattedArcLabel:Ri(i,t,y)},u?.pieArcLabel))})}))}function Re(e,i){const{height:t,width:n}=i,{cx:a,cy:r}=e,c=Math.min(n,t)/2,o=q(a??"50%",n),f=q(r??"50%",t);return{cx:o,cy:f,availableRadius:c}}function Ai(e){const{skipAnimation:i,slots:t,slotProps:n,onItemClick:a}=e,r=je(),{left:c,top:o,width:f,height:d}=le.useContext(we),s=He(i);if(r===void 0)return null;const{series:g,seriesOrder:l}=r;return j.jsxs("g",{children:[l.map(u=>{const{innerRadius:m,outerRadius:x,cornerRadius:_,paddingAngle:p,data:R,cx:A,cy:y,highlighted:$,faded:P}=g[u],{cx:v,cy:C,availableRadius:I}=Re({cx:A,cy:y},{width:f,height:d}),L=q(x??I,I),M=q(m??0,I);return j.jsx("g",{transform:`translate(${c+v}, ${o+C})`,children:j.jsx(li,{innerRadius:M,outerRadius:L,cornerRadius:_,paddingAngle:p,id:u,data:R,skipAnimation:s,highlighted:$,faded:P,onItemClick:a,slots:t,slotProps:n})},u)}),l.map(u=>{const{innerRadius:m,outerRadius:x,arcLabelRadius:_,cornerRadius:p,paddingAngle:R,arcLabel:A,arcLabelMinAngle:y,data:$,cx:P,cy:v}=g[u],{cx:C,cy:I,availableRadius:L}=Re({cx:P,cy:v},{width:f,height:d}),M=q(x??L,L),k=q(m??0,L),h=_===void 0?(M+k)/2:q(_,L);return j.jsx("g",{transform:`translate(${c+C}, ${o+I})`,children:j.jsx(mi,{innerRadius:k,outerRadius:M??L,arcLabelRadius:h,cornerRadius:p,paddingAngle:R,id:u,data:$,skipAnimation:s,arcLabel:A,arcLabelMinAngle:y,slots:t,slotProps:n})},u)})]})}const yi=["xAxis","yAxis","series","width","height","margin","colors","sx","tooltip","axisHighlight","skipAnimation","legend","topAxis","leftAxis","rightAxis","bottomAxis","children","slots","slotProps","onItemClick","loading","highlightedItem","onHighlightChange","className"],$i={top:5,bottom:5,left:5,right:100},bi={top:5,bottom:5,left:100,right:5},Mi=le.forwardRef(function(i,t){const n=Fe({props:i,name:"MuiPieChart"}),{xAxis:a,yAxis:r,series:c,width:o,height:f,margin:d,colors:s,sx:g,tooltip:l={trigger:"item"},axisHighlight:u={x:"none",y:"none"},skipAnimation:m,legend:x,topAxis:_=null,leftAxis:p=null,rightAxis:R=null,bottomAxis:A=null,children:y,slots:$,slotProps:P,onItemClick:v,loading:C,highlightedItem:I,onHighlightChange:L,className:M}=n,k=B(n,yi),h=Ee(),b=T({},h?bi:$i,d),E=T({direction:"column",position:{vertical:"middle",horizontal:h?"left":"right"}},x);return j.jsxs(Ne,T({},k,{ref:t,series:c.map(N=>T({type:"pie"},N)),width:o,height:f,margin:b,xAxis:a??[{id:Se,scaleType:"point",data:[...new Array(Math.max(...c.map(N=>N.data.length)))].map((N,D)=>D)}],yAxis:r,colors:s,sx:g,disableAxisListener:l?.trigger!=="axis"&&u?.x==="none"&&u?.y==="none",highlightedItem:I,onHighlightChange:L,className:M,skipAnimation:m,children:[j.jsx(De,{topAxis:_,leftAxis:p,rightAxis:R,bottomAxis:A,slots:$,slotProps:P}),j.jsx(Ai,{slots:$,slotProps:P,onItemClick:v}),j.jsx(Ue,{loading:C,slots:$,slotProps:P}),j.jsx(Oe,T({},E,{slots:$,slotProps:P})),j.jsx(We,T({},u)),!C&&j.jsx(qe,T({},l,{slots:$,slotProps:P})),y]}))});export{Mi as P};
